# Release Images Metadata

Each release publishes an `images-metadata.yaml` artifact alongside `tools.tar.gz`.
This file summarizes base and tool metadata and is generated by
`scripts/util/generate-images-metadata.sh` during the release workflow.
`doc/images-metadata.schema.json` defines the JSON Schema used to validate it.

## Contents

- `aicage-image.version`: The release tag of this repository.
- `aicage-image-base.version`: The latest release tag of `aicage-image-base` used
  to resolve `bases.tar.gz`.
- `bases`: Map of base alias to all key/values from `bases/<alias>/base.yaml`
  inside the base release artifact.
- `tool`: Map of tool name to all key/values from `tools/<tool>/tool.yaml`,
  plus a computed `valid_bases` list.

`valid_bases` is derived from the full base list and filtered by the optional
`base_exclude` and `base_distro_exclude` lists in each tool definition.

## Example

```yaml
aicage-image:
  version: 0.3.2
aicage-image-base:
  version: 0.9.1
bases:
  ubuntu:
    base_image_distro: Ubuntu
    base_image_description: Ubuntu base
    root_image: ubuntu:24.04
tool:
  copilot:
    tool_full_name: GitHub Copilot CLI
    tool_homepage: https://github.com/features/copilot/cli
    tool_path: ~/.copilot
    base_exclude:
      - alpine
      - minimal
    base_distro_exclude:
      - Alpine
    valid_bases:
      - ubuntu
      - debian
```
